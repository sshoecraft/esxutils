
#after 1 day, roll to 5 mins
#after 3 days roll to 15 mins
#after 1 week roll to 30 mins
#after 1 month roll to 1 hour
#delete after 6 months

hids=/dev/shm/arcperf.host_ids

doit() {
	# Have a "window" that slides over the data, consolidating it
	win_start = start_date
	loop {
		win_end = win_start + interval
		select avgerage data
		delete data
		insert average
		win_start += interval
		if win_strt >= win_end, break
	}
}

# roll to 5 mins
step1() {
	int="time >= DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 3 day) and time < DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 1 day)"
	start_date = get the date 1 day ago
	end_date = get the date 3 days ago
#	for every hour ... 
#	for (h=0; h < 23; h++) {
#		every 5 mins ....
#		for(i=0; i < 60; i += 5) {
#	cur_date = year + month + day + hour + min
#	if (cur_date == end_date) break
}

}

# Finally, delete anything older than 6 months
#mysql -N -B -e "delete from host_perf where time < DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 6 month)";
